let sortPrice,notification,productControl;function Initialize(){let t=document.querySelectorAll(".product__item");sortPrice=new SortPrice(t),notification=new Notification,productControl=new ProductControl(t.length),productControl.UpdateNodeProduct(),InitButtonUp(),InitBurger()}function SortPrice(t){let e=this;this.productSorted=Array.apply(null,t),this.toggleSort=!1,this.buttonSortingPrice=document.querySelector(".catalog__sorting_price"),this.productWrapper=document.querySelector(".product__wrapper"),this.sortingArrow=document.querySelector(".catalog__sorting_arrow"),function(){let t=function(){return Math.round(9*Math.random())};for(let o=0;o<e.productSorted.length;o++)e.productSorted[o].querySelector(".product__price_text span").innerText=t()+t()+" "+t()+t()+t()}(),e.productSorted.sort((function(t,e){let o=function(t){return t.querySelector(".product__price_text span").innerText.replace(/\s/g,"")};return o(t)-o(e)})),e.buttonSortingPrice.addEventListener("click",(function(){e.toggleSort=!e.toggleSort,e.sortingArrow.style.transform="rotate("+(e.toggleSort?180:0)+"deg)",e.ApplyNodes(e.toggleSort)})),this.ApplyNodes=function(t){if(t)for(let t=0;t<this.productSorted.length;t++)this.productWrapper.appendChild(this.productSorted[t]);else for(let t=0;t<this.productSorted.length;t++)this.productWrapper.insertBefore(this.productSorted[t],this.productWrapper.firstChild);productControl.UpdateNodeProduct()}}function Notification(){let t=this;function e(){if(!(t.time<=1))return t.notificationNode.style.display="none",void(t.time=0);function o(e,o,n,r){t.notificationNode.style.opacity=i(t.time,e,o,n,r)}function n(e,o,n,r){t.notificationNode.style.left=i(t.time,e,o,n,r)+"px"}function i(t,e,o,n,i){return n+(i-n)*(t-e)/(o-e)}t.time<.3?(o(0,.3,.5,1),n(0,.3,-220,20)):(o(.3,1,1,0),n(.3,1,20,60)),t.time+=.01,window.requestAnimFrame(e)}this.time=0,this.notificationNode=document.querySelector(".notification"),this.Show=function(o){this.notificationNode.querySelector(".notification__text").innerText=o,function(){t.notificationNode.style.display="block",0==t.time&&e();t.time=0}()}}function ProductControl(t){let e=this;this.nowShowingProducts=6,this.amountProducts=t,this.buttonMoreShow=document.querySelector(".product__show-more"),function(){let t=document.querySelectorAll(".product__favorites");for(let o=0;o<t.length;o++){const n=t[o];n.addEventListener("click",(function(){e(n)}))}function e(t){let e;t.classList.toggle("addedFavorites"),e=t.classList.contains("addedFavorites"),notification.Show(e?"Добавлено в избранное":"Удалено из избранного")}}(),e.buttonMoreShow.addEventListener("click",(function(){e.nowShowingProducts+=18,e.UpdateNodeProduct()})),this.UpdateNodeProduct=function(){this.nowShowingProducts=Math.min(this.amountProducts,this.nowShowingProducts),function(){let t=document.querySelectorAll(".product__item");for(let o=0;o<e.nowShowingProducts;o++)t[o].style.display="block";for(let o=e.nowShowingProducts;o<t.length;o++)t[o].style.display="none"}(),e.amountProducts!=e.nowShowingProducts?e.buttonMoreShow.querySelector(".product__show-more_number").innerText=Math.min(e.amountProducts-e.nowShowingProducts,18):e.buttonMoreShow.style.display="none"}}function InitBurger(){let t=document.querySelector(".burger"),e=document.querySelector(".nav-wrap"),o=document.querySelector(".nav-wrap__content");t.addEventListener("click",(function(){e.style.display="block",o.style.display="block"})),e.addEventListener("click",(function(){e.style.display="none",o.style.display="none"}))}function InitButtonUp(){let t=document.querySelector(".up-button");t.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){t.style.display=pageYOffset<200?"none":"block"}))}function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},Initialize(),testWebP((function(t){1==t&&document.querySelector("body").classList.add("webp")})),function(){let t=[],e=document.querySelectorAll("[data-da]"),o=[],n=[];if(e.length>0){let l=0;for(let n=0;n<e.length;n++){const i=e[n],d=i.getAttribute("data-da");if(""!=d){const e=d.split(","),n=e[1]?e[1].trim():"last",u=e[2]?e[2].trim():"767",s="min"===e[3]?e[3].trim():"max",a=document.querySelector("."+e[0].trim());e.length>0&&a&&(i.setAttribute("data-da-index",l),t[l]={parent:i.parentNode,index:(r=i,c=void 0,c=Array.prototype.slice.call(r.parentNode.children),c.indexOf(r))},o[l]={element:i,destination:document.querySelector("."+e[0].trim()),place:n,breakpoint:u,type:s},l++)}}(i=o).sort((function(t,e){return t.breakpoint>e.breakpoint?-1:1})),i.sort((function(t,e){return t.place>e.place?1:-1}));for(let t=0;t<o.length;t++){const e=o[t],i=e.breakpoint,r=e.type;n.push(window.matchMedia("("+r+"-width: "+i+"px)")),n[t].addListener(d)}}var i,r,c;function d(t){for(let t=0;t<o.length;t++){const e=o[t],i=e.element,r=e.destination,c=e.place,d="_dynamic_adapt_"+e.breakpoint;if(n[t].matches){if(!i.classList.contains(d)){let t=u(r)[c];"first"===c?t=u(r)[0]:"last"===c&&(t=u(r)[u(r).length]),r.insertBefore(i,r.children[t]),i.classList.add(d)}}else i.classList.contains(d)&&(l(i),i.classList.remove(d))}}function l(e){const o=e.getAttribute("data-da-index"),n=t[o],i=n.parent,r=n.index,c=u(i,!0)[r];i.insertBefore(e,i.children[c])}function u(t,e){const o=t.children,n=[];for(let t=0;t<o.length;t++){const i=o[t];(e||null==i.getAttribute("data-da"))&&n.push(t)}return n}d()}();