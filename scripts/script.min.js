let sortPrice,notification,productControl;function Initialize(){let t=document.querySelectorAll(".product__item");sortPrice=new SortPrice(t),notification=new Notification,productControl=new ProductControl(t.length),productControl.UpdateNodeProduct(),InitButtonUp(),InitBurger()}function SortPrice(t){let o=this;this.productSorted=Array.apply(null,t),this.toggleSort=!1,this.buttonSortingPrice=document.querySelector(".catalog__sorting_price"),this.productWrapper=document.querySelector(".product__wrapper"),this.sortingArrow=document.querySelector(".catalog__sorting_arrow"),function(){let t=function(){return Math.round(9*Math.random())};for(let e=0;e<o.productSorted.length;e++)o.productSorted[e].querySelector(".product__price_text span").innerText=t()+t()+" "+t()+t()+t()}(),o.productSorted.sort((function(t,o){let e=function(t){return t.querySelector(".product__price_text span").innerText.replace(/\s/g,"")};return e(t)-e(o)})),o.buttonSortingPrice.addEventListener("click",(function(){o.toggleSort=!o.toggleSort,o.sortingArrow.style.transform="rotate("+(o.toggleSort?180:0)+"deg)",o.ApplyNodes(o.toggleSort)})),this.ApplyNodes=function(t){if(t)for(let t=0;t<this.productSorted.length;t++)this.productWrapper.appendChild(this.productSorted[t]);else for(let t=0;t<this.productSorted.length;t++)this.productWrapper.insertBefore(this.productSorted[t],this.productWrapper.firstChild);productControl.UpdateNodeProduct()}}function Notification(){let t=this;function o(){if(!(t.time<=1))return t.notificationNode.style.display="none",void(t.time=0);function e(o,e,n,r){t.notificationNode.style.opacity=i(t.time,o,e,n,r)}function n(o,e,n,r){t.notificationNode.style.left=i(t.time,o,e,n,r)+"px"}function i(t,o,e,n,i){return n+(i-n)*(t-o)/(e-o)}t.time<.3?(e(0,.3,.5,1),n(0,.3,-220,20)):(e(.3,1,1,0),n(.3,1,20,60)),t.time+=.01,window.requestAnimFrame(o)}this.time=0,this.notificationNode=document.querySelector(".notification"),this.Show=function(e){this.notificationNode.querySelector(".notification__text").innerText=e,function(){t.notificationNode.style.display="block",0==t.time&&o();t.time=0}()}}function ProductControl(t){let o=this;this.nowShowingProducts=6,this.amountProducts=t,this.buttonMoreShow=document.querySelector(".product__show-more"),function(){let t=document.querySelectorAll(".product__favorites");for(let e=0;e<t.length;e++){const n=t[e];n.addEventListener("click",(function(){o(n)}))}function o(t){let o;t.classList.toggle("addedFavorites"),o=t.classList.contains("addedFavorites"),notification.Show(o?"Добавлено в избранное":"Удалено из избранного")}}(),o.buttonMoreShow.addEventListener("click",(function(){o.nowShowingProducts+=18,o.UpdateNodeProduct()})),this.UpdateNodeProduct=function(){this.nowShowingProducts=Math.min(this.amountProducts,this.nowShowingProducts),function(){let t=document.querySelectorAll(".product__item");for(let e=0;e<o.nowShowingProducts;e++)t[e].style.display="block";for(let e=o.nowShowingProducts;e<t.length;e++)t[e].style.display="none"}(),o.amountProducts!=o.nowShowingProducts?o.buttonMoreShow.querySelector(".product__show-more_number").innerText=Math.min(o.amountProducts-o.nowShowingProducts,18):o.buttonMoreShow.style.display="none"}}function InitBurger(){let t=document.querySelector(".burger"),o=document.querySelector(".nav-wrap"),e=document.querySelector(".nav-wrap__content");t.addEventListener("click",(function(){o.style.display="block",e.style.display="block"})),o.addEventListener("click",(function(){o.style.display="none",e.style.display="none"}))}function InitButtonUp(){let t=document.querySelector(".up-button");t.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){t.style.display=pageYOffset<200?"none":"block"}))}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},Initialize();